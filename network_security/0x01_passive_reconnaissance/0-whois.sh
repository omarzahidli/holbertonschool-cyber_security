#!/bin/bash
whois $1 | awk 'BEGIN{s=""}/^Registrant /{s="Registrant"} /^Admin /{s="Admin"} /^Tech /{s="Tech"} s!=""&&/Name:/{sub(/.*Name:[ \t]*/,"");print s" Name,"$0} s!=""&&/Organization:/{sub(/.*Organization:[ \t]*/,"");print s" Organization,"$0} s!=""&&/Street:/{sub(/.*Street:[ \t]*/,"");print s" Street,"$0" "} s!=""&&/City:/{sub(/.*City:[ \t]*/,"");print s" City,"$0} s!=""&&/State\/Province:/{sub(/.*State\/Province:[ \t]*/,"");print s" State/Province,"$0} s!=""&&/Postal Code:/{sub(/.*Postal Code:[ \t]*/,"");print s" Postal Code,"$0} s!=""&&/Country:/{sub(/.*Country:[ \t]*/,"");print s" Country,"$0} s!=""&&/Phone:/{sub(/.*Phone:[ \t]*/,"");print s" Phone,"$0;print s" Phone Ext:,"} s!=""&&/Fax:/{sub(/.*Fax:[ \t]*/,"");print s" Fax,"$0;print s" Fax Ext:,"} s!=""&&/Email:/{sub(/.*Email:[ \t]*/,"");print s" Email,"$0}' > $1.csv
